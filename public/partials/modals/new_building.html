<div ng-controller="NewBuildingCtrl as nbc" class="ui modal small"><i class="close icon"></i><div class="header">{{loc.office.new_b_modal_title}}</div><div class="content"><form name="NewBuildingForm" class="ui form"><div ng-class="{error: NewBuildingForm.name.$dirty &amp;&amp; !NewBuildingForm.name.$valid}" class="field"><label>{{loc.office.name}}</label><input type="text" ng-model="nbc.name" name="name" required="required"/></div><div class="field"><label>{{loc.office.type}}</label><div dropdown="dropdown" ng-model="nbc.type" ng-change="nbc.changeType(selected)"><div dd-item="dd-item" ng-repeat="(id,type) in nbc.types" data="{{id}}" ng-selected="keys(nbc.types)[0]==id" class="item">{{loc.buildings.types[id]}}</div></div></div><div ng-show="nbc.types[nbc.type] &amp;&amp; (keys(nbc.types[nbc.type].resources_out).length &gt; 0)" class="ui segment"><div ng-repeat="(key,outs) in nbc.types[nbc.type].resources_out" class="field"><div class="ui radio checkbox"><input type="radio" name="out" ng-model="nbc.out_id" value="{{key}}"/><label>{{loc.products.types[outs.type]}} <span><= </span><span ng-repeat="res in outs.need" class="commed">{{loc.products.types[res.type]}}</span></label></div></div></div><div ng-scope="ng-scope" class="field"><label>{{loc.office.region}}</label><div dropdown="dropdown" ng-model="nbc.region"><div dd-item="dd-item" ng-repeat="region in nbc.regions" ng-selected="region.id==keys(nbc.regions)[0]" data="{{region.id}}" class="item">{{region.name}}</div></div></div><div class="fields two"><div ng-class="{error: NewBuildingForm.x.$dirty &amp;&amp; !NewBuildingForm.x.$valid}" class="field"><label>X</label><input ng-model="nbc.x" required="required" type="number" min="0" max="49" name="x"/></div><div ng-class="{error: NewBuildingForm.y.$dirty &amp;&amp; !NewBuildingForm.y.$valid}" class="field"><label>Y</label><input ng-model="nbc.y" required="required" type="number" min="0" max="49" name="y"/></div></div><div ng-class="{green: nbc.types[nbc.type].price &lt;= nbc.profile.gold, red: nbc.types[nbc.type].price &gt; nbc.profile.gold}" class="ui message"><div class="header">{{loc.office.price}}: {{nbc.types[nbc.type].price}}</div></div></form></div><div class="actions"><div class="ui black deny button">{{loc.office.cancel}}</div><div ng-click="nbc.create()" ng-class="{disabled: !NewBuildingForm.$valid}" class="ui positive button">{{loc.office.construct}}</div></div></div>